name: ğŸ File Reader Assignment Tests

on: 
  push:
    branches: [ main, master, develop ]
  pull_request:
    branches: [ main, master ]

jobs:
  quality-check:
    name: ğŸ§ª Test & Quality Assurance
    runs-on: ubuntu-latest
    
    strategy:
      matrix:
        python-version: ['3.9', '3.10', '3.11']
    
    steps:
    - name: ğŸ“¥ Checkout Repository
      uses: actions/checkout@v3
    
    - name: ğŸ Setup Python ${{ matrix.python-version }}
      uses: actions/setup-python@v4
      with:
        python-version: ${{ matrix.python-version }}
    
    - name: ğŸš€ Install Project Dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        echo "âœ… Dependencies installed successfully"
    
    - name: ğŸ” Run Unit Tests
      run: |
        echo "ğŸ§ª Starting test suite execution..."
        pytest test_file_reader.py -v --tb=short
        echo "âœ… All tests completed"
    
    - name: ğŸ¨ Code Formatting Check
      run: |
        echo "ğŸ¨ Checking code formatting..."
        black --check --diff test_file_reader.py file_reader.py
        echo "âœ… Code formatting verified"
    
    - name: ğŸ“Š Generate Test Report
      if: always()
      run: |
        echo "ğŸ“Š Test execution summary:"
        echo "- Python Version: ${{ matrix.python-version }}"
        echo "- Repository: ${{ github.repository }}"
        echo "- Branch: ${{ github.ref_name }}"
        echo "- Commit: ${{ github.sha }}"

  assignment-validation:
    name: ğŸ“ Assignment Requirements Check
    runs-on: ubuntu-latest
    needs: quality-check
    
    steps:
    - name: ğŸ“¥ Get Code
      uses: actions/checkout@v3
    
    - name: ğŸ”§ Python Setup
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: ğŸ“¦ Install Requirements
      run: pip install -r requirements.txt
    
    - name: âœ… Validate Assignment Features
      run: |
        echo "ğŸ“ Checking university assignment requirements..."
        python3 -c "
        from file_reader import FileReader, AdvancedFileReader, color_decorator
        print('âœ… Custom classes imported successfully')
        
        # Test generators
        reader = FileReader()
        print('âœ… Generator functionality available')
        
        # Test decorators
        @color_decorator('green')
        def test(): return 'decorated'
        print('âœ… Custom decorator working')
        
        print('ğŸ‰ All assignment requirements validated!')
        " 
